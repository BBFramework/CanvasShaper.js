<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=no, width=device-width" />
<link href="../style.css" rel="stylesheet" type="text/css" media="all" />
<script src="../jquery.js" type="text/javascript"></script>
<script src="../canvasshaper.js" type="text/javascript"></script>
<script src="../canvasshaper+.js" type="text/javascript"></script>
<title>Documentation | Bapquad Games | bapquadgames.com</title>
</head>

<body class="border-col">
<div class="tree-col">
	<p><a href="index.html">Main Index</a></p>
	<h1>CanvasShaper</h1>
	<ul>
		<li class="class-tree"><a href="layer.html">CanvasShaper_Layer</a></li>
		<li class="class-tree"><a href="math.html">CanvasShaper_Math</a></li>
		<li class="class-tree"><a href="filter.html">CanvasShaper_Filter</a></li>
		<li class="class-tree"><a href="assetmanager.html">CanvasShaper_AssetManager</a></li>
		<li class="class-tree"><a href="graphics.html">CanvasShaper_Graphics</a></li>
		<li class="class-tree"><a href="sceneobject.html">CanvasShaper_SceneObject</a></li>
		<li class="class-tree"><a href="symbolarc.html">CanvasShaper_SymbolArc</a></li>
		<li class="class-tree"><a href="symbolcircle.html">CanvasShaper_SymbolCircle</a></li>
		<li class="class-tree"><a href="symbolline.html">CanvasShaper_SymbolLine</a></li>
		<li class="class-tree"><a href="symboloval.html">CanvasShaper_SymbolOval</a></li>
		<li class="class-tree"><a href="symbolpolygon.html">CanvasShaper_SymbolPolygon</a></li>
		<li class="class-tree"><a href="symbolrect.html">CanvasShaper_SymbolRect</a></li>
		<li class="class-tree"><a href="symbolroundrect.html">CanvasShaper_SymbolRoundRect</a></li>
		<li class="class-tree"><a href="symbolshape.html">CanvasShaper_SymbolShape</a></li>
		<li class="class-tree"><a href="symboltext.html">CanvasShaper_Text</a></li>
		<li class="class-tree"><a href="symbolimage.html">CanvasShaper_Image</a></li>
	</ul>
	<h1>CanvasShaper+</h1>
	<ul>
		<li class="class-tree"><a href="physics.html">CanvasShaper_Physics</a></li>
		<li class="class-tree"><a href="worldlimit.html">CanvasShaper_WorldLimit</a></li>
		<li class="class-tree"><a href="collision.html">CanvasShaper_Collision</a></li>
		<li class="class-tree"><a href="button.html">CanvasShaper_Button</a></li>
		<li class="class-tree"><a href="staticsprite.html">CanvasShaper_StaticSprite</a></li>
		<li class="class-tree"><a href="animesprite.html">CanvasShaper_AnimeSprite</a></li>
		<li class="class-tree"><a href="scroller.html">CanvasShaper_Scroller</a></li>
		<li class="class-tree"><a href="particle.html">CanvasShaper_Particle</a></li>
		<li class="class-tree"><a href="tile.html">CanvasShaper_Tile</a></li>
	</ul>
	<h1>Hướng dẫn thực hiện</h1>
	<ul>
		<li class="class-tree"><a href="fish-demo.html">Fish Demo</a></li>
	</ul>
</div>
<div class="content-col">
	<h1>Hướng dẫn thực hiện - Fish Demo</h1>
	<h2>Giới thiệu</h2>
	<p class="note">Fish Demo là là một demo game về cá. Trong game chú cá sẽ có nhiệm vụ ăn những con cá nhỏ để lớn lên, nhưng đồng thời cũng phải né những con cá lớn.</p>
	<p class="note">Bài hướng dẫn Fish Demo sẽ được tạo nên từ các tập tin: hình ảnh, một trang html, một tập tin script.js. Và bài hướng dẫn được chia làm các phần như sau:</p>
	<ul class="ml25">
		<li class="mb5"><a href="#prepair">Chuẩn bị.</a></li>
		<li class="mb5"><a href="#create_layer">Tạo Layer.</a></li>
		<li class="mb5"><a href="#create_progressbar">Tạo loading progress bar.</a></li>
		<li class="mb5">
			<p><a href="#create_level">Tạo level game.</a></p>
			<ul class="ml25">
				<li><a href="#setup_background">Cài đặt background cho level.</a></li>
				<li><a href="#setup_scroller_wave">Cài đặt sóng nước cho level.</a></li>
				<li><a href="#setup_play_button">Cài đặt nút play</a></li>
				<li><a href="#setup_fish">Cài đặt cá</a></li>
				<li><a href="#setup_player">Cài đặt người chơi</a></li>
				<li><a href="#setup_bubble">Cài đặt bong bóng</a></li>
				<li><a href="#setup_player">Cài đặt tương tác Game</a></li>
			</ul>
		</li>
		<li class="mb5"><a href="#play_level">Chạy level game.</a></li>
		<li class="mb5"><a href="#consolute">Kết luận</a></li>
	</ul>
	<p class="note">Bây giờ bắt tay vào việc thôi!</p>
	<h3 id="prepair">Chuẩn bị</h3>
	<div class="inner">
		<p class="note">Bạn vào thư mục <span class="mark-folder">.\FishDemos\images\</span> kiểm tra các tập tin hình ảnh sau:</p>
		<ul class="ml25">
			<li>1. background.jpg</li>
			<li>2. bubble.png</li>
			<li>3. explode.png</li>
			<li>4. filter-sample.jpg</li>
			<li>5. fish.png</li>
			<li>6. fish1.png</li>
			<li>7. play.png</li>
			<li>8. wave.png</li>
		</ul>
		<p class="note">Bạn vào thư mục <span class="mark-folder">.\FishDemos\sounds\</span> kiểm tra các tập tin âm thanh sau:</p>
		<ul class="ml25">
			<li>1. alien_boom.mp3</li>
			<li>2. bullet.mp3</li>
			<li>3. bullet_boom.mp3</li>
			<li>4. nuke.mp3</li>
		</ul>
		<p class="mt15 mb5">Bạn vào thư mục <span class="mark-folder">.\FishDemos\</span> tạo ra tập tin <span class="mark-file">index.html</span> với các nội dung như sau</p>
		<div class="code-block">
			&lt;<span class="code-keyword">!DOCTYPE HTML</span>&gt;<br>
			&lt;<span class="code-keyword">html</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">head</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">meta</span> <span class="code-attr">charset</span>=<span class="code-value">&quot;utf-8&quot;</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">meta</span> <span class="code-attr">name</span>=<span class="code-value">&quot;viewport&quot;</span> <span class="code-attr">content</span>=<span class="code-value">&quot;user-scalable=no, width=device-width&quot;</span> /&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">link</span> <span class="code-attr">href</span>=<span class="code-value">&quot;../style.css&quot;</span> <span class="code-attr">rel</span>=<span class="code-value">&quot;stylesheet&quot;</span> <span class="code-attr">type</span>=<span class="code-value">&quot;text/css&quot;</span> <span class="code-attr">media</span>=<span class="code-value">&quot;all&quot;</span> /&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">script</span> <span class="code-attr">src</span>=<span class="code-value">&quot;../jquery.js&quot;</span> <span class="code-attr">type</span>=<span class="code-value">&quot;text/javascript&quot;</span>&gt;&lt;/<span class="code-keyword">script</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">script</span> <span class="code-attr">src</span>=<span class="code-value">&quot;../canvasshaper.js&quot;</span> <span class="code-attr">type</span>=<span class="code-value">&quot;text/javascript&quot;</span>&gt;&lt;/<span class="code-keyword">script</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">script</span> <span class="code-attr">src</span>=<span class="code-value">&quot;../canvasshaper+.js&quot;</span> <span class="code-attr">type</span>=<span class="code-value">&quot;text/javascript&quot;</span>&gt;&lt;/<span class="code-keyword">script</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">script</span> <span class="code-attr">src</span>=<span class="code-value">&quot;script.js&quot;</span> <span class="code-attr">type</span>=<span class="code-value">&quot;text/javascript&quot;</span>&gt;&lt;/<span class="code-keyword">script</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">title</span>&gt;FishDemos | Bapquad Games | bapquadgames.com&lt;/<span class="code-keyword">title</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="code-keyword">head</span>&gt;<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">body</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">div</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-keyword">canvas</span> <span class="code-attr">id</span>=<span class="code-value">&quot;FishDemos&quot;</span> <span class="code-attr">width</span>=<span class="code-value">&quot;480&quot;</span> <span class="code-attr">height</span>=<span class="code-value">&quot;320&quot;</span> <span class="code-attr">style</span>=<span class="code-value">&quot;display:block;&quot;</span>&gt;&lt;/<span class="code-keyword">canvas</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="code-keyword">div</span>&gt;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="code-keyword">body</span>&gt;<br>
			&lt;/<span class="code-keyword">html</span>&gt;<br>
		</div>
		<p class="mt15 mb5">Trong đoạn code html trên bạn sẽ thấy dòng code</p>
		<div class="code-block">
			<p>&lt;<span class="code-keyword">canvas</span> <span class="code-attr">id</span>=<span class="code-value">&quot;FishDemos&quot;</span> <span class="code-attr">width</span>=<span class="code-value">&quot;480&quot;</span> <span class="code-attr">height</span>=<span class="code-value">&quot;320&quot;</span> <span class="code-attr">style</span>=<span class="code-value">&quot;display:block;&quot;</span>&gt;&lt;/<span class="code-keyword">canvas</span>&gt;</p>
		</div>
		<p class="note">Nó sẽ tạo ra một canvas có kích thước chiều ngang là 480 pixel, và kích thước chiều cao là 320 pixel.</p>
		<p class="mt15 mb5">Bạn vào thư mục <span class="mark-folder">.\FishDemos\</span> tạo ra tập tin <span class="mark-file">script.js</span> với các dòng mã sau:</p>
		<div class="code-block">
			<span class="code-comment">// JavaScript Document</span><br>
			<span class="code-keyword">var</span> TickGID;<br>
			<span class="code-keyword">var</span> RequestAnimationFrame = window.requestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.mozRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.webkitRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.msRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span>( callback ) <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> window.<span class="code-keyword">setTimeout</span>(callback, <span class="code-constant">1000</span> / <span class="code-constant">60</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;};<br>
			<span class="code-keyword">var</span> cancelAnimationFrame = window.cancelAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span>(animId) <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> window.<span class="code-keyword">clearTimeout</span>(animId);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
			<span class="code-keyword">function</span> UnTick() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;cancelAnimationFrame(TickGID);	<br>
			}<br><br>
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// Some code come here...</span><br>
			}<br><br>
			<span class="code-constant">$</span>(document).<span class="code-keyword">ready</span>(<span class="code-keyword">function</span>(e) {<br>
			&nbsp;&nbsp;&nbsp;&nbsp;CyGame();<br>
			});<br><br>
			<span class="code-constant">$</span>(window).<span class="code-keyword">resize</span>(<span class="code-keyword">function</span>(e) {<br>
				<br>
			});<br>
		</div>
		<p class="mt15 mb5">Trong đoạn code javascript trên ta sẽ thấy các dòng code sau</p>
		<div class="code-block">
			<span class="code-keyword">var</span> TickGID;<br>
			<span class="code-keyword">var</span> RequestAnimationFrame = window.requestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.mozRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.webkitRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;window.msRequestAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span>( callback ) <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> window.<span class="code-keyword">setTimeout</span>(callback, <span class="code-constant">1000</span> / <span class="code-constant">60</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;};<br>
			<span class="code-keyword">var</span> cancelAnimationFrame = window.cancelAnimationFrame || <br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span>(animId) <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> window.<span class="code-keyword">clearTimeout</span>(animId);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;};
		</div>
		<p class="note">Chúng được dùng để ngăn ngừa trình duyệt của bạn không hỗ trợ phương thức <span class="code-hint">RequestAnimationFrame</span> và <span class="code-hint">CancelAnimationFrame</span>. Trong trường hợp nếu không được hỗ trợ hoạt hình thì code sẽ tạo ra một phương thức hoạt hình với framerate là 60 frame/giây.</p>
		<p class="mt15 mb5">Sau đó bạn tạo ra hàm <span class="code-hint">UnTick</span> dùng để stop hoạt hình.</p>
		<div class="code-block">
			<span class="code-keyword">function</span> UnTick() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;cancelAnimationFrame(TickGID);	<br>
			}
		</div>
		<p class="note">Hàm <span class="code-hint">CyGame</span> dùng để tạo ra game.</p>
		<p class="mt15 mb5">Các đoạn code ở cuối file <span class="mark-file">script.js</span> được dùng để tạo khởi tạo ứng dụng, và bắt đầu chạy ứng dụng game tại đây.</p>
		<div class="code-block">
			<span class="code-constant">$</span>(document).<span class="code-keyword">ready</span>(<span class="code-keyword">function</span>(e) {<br>
			&nbsp;&nbsp;&nbsp;&nbsp;CyGame();<br>
			});<br><br>
			<span class="code-constant">$</span>(window).<span class="code-keyword">resize</span>(<span class="code-keyword">function</span>(e) {<br>
				<br>
			});
		</div>

		<p class="note">Giờ thì chúng ta sẽ bắt đầu tạo layer để chứa các thành phần game.</p>
	</div>
	
	<h3 id="create_layer">Tạo Layer.</h3>
	<div class="inner">
		<p class="note">Thông thường, bạn tạo layer bằng class <a class="code-hint" href="layer.html">CanvasShaper_Layer</a>. Hãy viết đoạn code như sau vào trong phương thức <span class="code-hint">CyGame</span>.</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Create Layer */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">var</span> Layer01 = <span class="code-keyword">new</span> CanvasShaper_Layer(<span class="code-param">"FishDemos"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">var</span> Layer02 = <span class="code-keyword">new</span> CanvasShaper_Layer(<span class="code-param">"FishDemos"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Settings Layer */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer01.setBackground(<span class="code-constant">255</span>, <span class="code-constant">255</span>, <span class="code-constant">255</span>, <span class="code-constant">1</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.setBackground(<span class="code-constant">255</span>, <span class="code-constant">150</span>, <span class="code-constant">0</span>, <span class="code-constant">1</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br>
			}
		</div>
		<p class="note"><span class="code-hint">Layer01</span> được dùng cho việc tạo progress bar tải hình ảnh và âm thanh. Còn <span class="code-hint">Layer02</span> được dùng để tạo level cho game. Sau đó ta dùng phương thức <span class="code-hint">setBackground</span> để cài đặt màu nền cho các layer. Trắng cho <span class="code-hint">Layer01</span>, và Cam cho <span class="code-hint">Layer02</span>.</p>
		<p class="note">Để một game có thể hoàn thành và chạy được, bạn cần phải khởi tạo các tài nguyên bên trong nó, chúng bao gồm các tập tin hình ảnh, âm thanh. Và bây giờ là lúc bạn sẽ qua <a href="#create_progressbar">Tạo loading progress bar</a> và học cách sử dụng <a class="code-hint" href="assetmanager.html">CanvasShaper_AssetManager</a>.</p>
	</div>

	<h3 id="create_progressbar">Tạo loading progress bar</h3>
	<div class="inner">
		<p class="note">Sau khi tạo layer, bạn sẽ tiếp tục tạo loading progress bar, nó được dùng để hiển thị tiến trình load âm thanh, và hình ảnh vào game.</p>
		<p class="note">Bạn sẽ viết tiếp vào trong phương thức <span class="code-hint">CyGame</span> đoạn code như sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Initialize the loading screen */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer01.LoadingBar = <span class="code-keyword">new</span> CanvasShaper_SymbolRect(Layer01);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer01.LoadingBar.setPosition(<span class="code-constant">480</span>/<span class="code-constant">2</span>-<span class="code-constant">160</span>, <span class="code-constant">320</span>/<span class="code-constant">2</span>-<span class="code-constant">10</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer01.LoadingBar.setSize(<span class="code-constant">1</span>, <span class="code-constant">10</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer01.LoadingBar.setBackground([{r:<span class="code-constant">255</span>, g:<span class="code-constant">138</span>, b:<span class="code-constant">0</span>, a:<span class="code-constant">1</span>, stop:<span class="code-constant">0</span>}]);<br>
			}
		</div>
		<p class="note">Tiếp theo bạn sẽ sử dụng <a class="code-hint" href="assetmanager.html">CanvasShaper_AssetManager</a> để tải các hình ảnh và âm thanh vào trong game.</p>
		<p class="note">Bạn sẽ code tiếp phương thức <span class="code-hint">CyGame</span> như sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Import File into Asset List */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">var</span> AssetManager = <span class="code-keyword">new</span> CanvasShaper_AssetManager(<span class="code-param">"jpg|gif|png"</span>, <span class="code-param">"wav|ogg|mp3"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/background.jpg"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/bubble.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/filter-sample.jpg"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/fish.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/fish1.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/explode.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/wave.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueFile(<span class="code-param">"images/play.png"</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.QueueDownloadAll();<br>
			}
		</div>
		<p class="note">Sau khi bạn tạo ra được AssetManager, chúng ta cần phải hiển thị tiến trình tải của nó.</p>
		<p class="note">Bạn sẽ tiếp tục code thêm vào phương thức <span class="code-hint">CyGame</span> đoạn code như sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Progress Asset Loading */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span> ProgressAssetLoading() <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer01.LoadingBar.setSize((AssetManager.getProgress()/<span class="code-constant">100</span>)*<span class="code-constant">300</span>, <span class="code-constant">2</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer01.Swap();<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(AssetManager.isComplete()) {<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UnTick();<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(CreateFishLevel, <span class="code-constant">300</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span>;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TickGID = RequestAnimationFrame(ProgressAssetLoading);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span>;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;}<br>
			}
		</div>
		<p class="note">Như vậy là bạn đã hoàn thành việc tạo ra loading progress bar. Giờ thì chúng ta sẽ qua tiếp phần <a href="#create_level">Tạo level game</a>.</p>
	</div>

	<h3 id="create_level">Tạo level game</h3>
	<div class="inner">
		<p class="note">Trong phương thức <span class="code-hint">CyGame</span> bạn tạo ra phương thức <span class="code-hint">CreateFishLevel</span> như sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CyGame() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">function</span> CreateFishLevel() <br>
			&nbsp;&nbsp;&nbsp;&nbsp;{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ... </span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;}<br>
			}
		</div>
		<h4 id="setup_background" class="mt15"><strong>Cài đặt background cho level</strong></h4>
		<p class="note">Bạn sẽ cài đặt background cho game bằng cách như đoạn code sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CreateFishLevel() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Set Background For Level */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Background = <span class="code-keyword">new</span> CanvasShaper_StaticSprite(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.getAsset(<span class="code-param">"images/background.jpg"</span>), <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-constant">0</span>, <span class="code-constant">0</span>, <span class="code-constant">480</span>, <span class="code-constant">320</span><br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>
			}
		</div>
		<h4 id="setup_scroller_wave" class="mt15"><strong>Cài đặt sóng nước cho level</strong></h4>
		<p class="note">Bạn sẽ cài đặt sóng nước cho game bằng cách như viết tiếp phương thức <span class="code-hint">CreateFishLevel</span> với đoạn code sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CreateFishLevel() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Create Scroller Wave */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Wave = <span class="code-keyword">new</span> CanvasShaper_Scroller(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.getAsset(<span class="code-param">"images/wave.png"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Wave.setAlpha(<span class="code-constant">15</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Wave.setVelocity(<span class="code-constant">0.32</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Wave.setPosition(<span class="code-constant">0</span>, <span class="code-constant">200</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Wave.setFlip(<span class="code-constant">CANVAS_SHAPER_FLIP_HORIZONTAL</span>);<br>
			}
		</div>
		<h4 id="setup_play_button" class="mt15"><strong>Cài đặt nút play</strong></h4>
		<p class="note">Bạn sẽ cài đặt nút play cho game bằng cách như viết tiếp phương thức <span class="code-hint">CreateFishLevel</span> với đoạn code sau:</p>
		<div class="code-block">
			<span class="code-keyword">function</span> CreateFishLevel() <br>
			{<br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ...</span><br><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">/** Create Play Button */</span><br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.PlayButton = <span class="code-keyword">new</span> CanvasShaper_Button(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AssetManager.getAsset(<span class="code-param">"images/play.png"</span>), <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-constant">0</span>, <span class="code-constant">0</span>, <span class="code-constant">76</span>, <span class="code-constant">32</span><br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.PlayButton.setPosition(<span class="code-constant">100</span>, <span class="code-constant">200</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;Layer02.PlayButton.onClick(function(<span class="code-param">e</span>) {<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Player.Game_Over = <span class="code-constant">0</span>;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Player.Game_Streng = <span class="code-constant">10</span>;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Player.setScale(Layer02.Player.Game_Streng/<span class="code-constant">100</span>, Layer02.Player.Game_Streng/<span class="code-constant">100</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Player.setCollisionBound(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-constant">0</span>, <span class="code-constant">0</span>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-constant">198</span>*Layer02.Player.Game_Streng/<span class="code-constant">100</span>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-constant">114</span>*Layer02.Player.Game_Streng/<span class="code-constant">100</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.Player.setPositionY(<span class="code-constant">150</span>);<br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layer02.PlayButton.hide();<br>
			&nbsp;&nbsp;&nbsp;&nbsp;});<br>
			}
		</div>
	</div>
</div>
</body>
</html>